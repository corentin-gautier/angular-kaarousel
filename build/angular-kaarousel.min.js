!function(){"use strict";function e(){var e={restrict:"EA",scope:{displayed:"=?",perSlide:"=?",autoplay:"=?",direction:"=?",pauseOnHover:"=?",centerActive:"=?",timeInterval:"=?",transitionDuration:"=?",updateRate:"=?",stopAfterAction:"=?",hideNav:"=?",hidePager:"=?",navOnHover:"=?",pagerOnHover:"=?",swipable:"=?",sync:"=?",data:"=?",animation:"=?",loop:"=?",options:"=?",afterSlide:"&?",beforeSlide:"&?",minWidth:"=?",expand:"=?",alwaysFill:"=?"},templateUrl:"app/components/kaarousel/templates/angular-kaarousel.html",transclude:!0,controller:n,controllerAs:"kc"};return e}function n(e,n,i,t,a,o,s){function r(){d(),m(),x(),V.ready=!0}function l(){return V.slides?new Array(Math.ceil(V.slides.length/V.options.perSlide)):void 0}function d(){V.kaarousel=n[0],V.kaarousel.classList.add(Y),V.kaarouselSliderContainer=V.kaarousel.querySelector(Y+"-slider-container"),V.kaarouselWrapper=V.kaarousel.querySelector(Y+"-wrapper"),V.kaarouselSlider=V.kaarousel.querySelector(Y+"-slider")}function u(){var n={};return _.isEmpty(e.options)?(_.forEach(J,function(i){n[i]=angular.isDefined(e[i])?e[i]:V.defaultOptions[i]}),n=c(n)):(n=angular.copy(e.options),n.afterSlide=e.afterSlide,n.beforeSlide=e.beforeSlide,n)}function c(e){return _.forEach(e,function(n,t){-1!==B.indexOf(t)&&i.hasOwnProperty(t)&&angular.isUndefined(n)&&(e[t]=!0)}),e}function p(e){_.forEach(G,function(e){V.kaarouselSlider.classList.remove(e+"-animation")}),V.kaarouselSlider.classList.add(e+"-animation"),_.forEach(V.slides,function(n){n.element.css({"transition-duration":"slide"===e?"":V.options.transitionDuration/1e3+"s"})})}function f(e,n){var i;switch(e){case"timeInterval":F(),T();break;case"animation":p(n);break;case"direction":g();break;case"autoplay":i=n?"play":"stop",V[i]();break;case"swipable":K(n);break;case"loop":n&&!V.isPlaying&&V.options.autoplay&&T();break;case"transitionDuration":R();break;case"sync":v(n);break;case"centerActive":W(V.currentIndex,!1,!0);break;case"perSlide":W(V.currentIndex,!1,!0);break;case"minWidth":k();break;case"alwaysFill":V.move(V.currentIndex,!1,!0)}"displayed"!==e&&"expand"!==e&&"animation"!==e||angular.isNumber(V.options.minWidth)||k()}function v(e){var n;V.options.autoplay&&(n=angular.isNumber(e)?"stop":"play",V[n]()),angular.isNumber(e)&&(e>V.slides.length-1&&(V.options.sync=V.slides.length-1),0>e&&(V.options.sync=0),M(),W(Math.floor(V.options.sync/V.options.perSlide),!1,!1))}function g(){var e="horizontal"===V.options.direction?"vertical":"horizontal";V.kaarousel.classList.remove("direction-"+e),V.kaarousel.classList.add("direction-"+V.options.direction),V.isHorizontal="horizontal"===V.options.direction,k()}function m(e,n){V.options=_.merge({},V.defaultOptions,h(u())),e?(V.options[e]=n,V.options=h(V.options),f(e,V.options[e])):P(),S()}function h(e){if(e.displayed<1&&(e.displayed=1),e.minWidth){var n=V.kaarouselSliderContainer.offsetWidth,i=Math.floor(n/e.minWidth);i<e.displayed&&(e.displayed=i),e.displayed<1&&(e.displayed=1)}return(!e.perSlide||e.perSlide>e.displayed)&&(e.perSlide=e.displayed),e.expand&&V.slides.length<e.displayed&&(e.displayed=V.slides.length),e.animation===G[1]&&e.perSlide!==e.displayed&&(e.perSlide=e.displayed),e}function y(e,n){var i=100/V.options.displayed,t=n%V.options.displayed;e.element.css(V.isHorizontal?"height":"width",""),e.element.css(V.isHorizontal?"width":"height",i+"%"),e.element.css(V.isHorizontal?"top":"left",""),e.element.css(V.isHorizontal?"left":"top","slide"===V.options.animation?"":t*i+"%")}function k(e){return angular.isDefined(e)&&"slide"===V.options.animation?void y(V.slides[e],e):(o.cancel(V.dimensionsTimeout),void(V.dimensionsTimeout=o(function(){_.forEach(V.slides,function(e,n){y(e,n)}),W(V.currentIndex,!1,!0)},200)))}function S(){V.navigation||(V.navigation={}),V.navigation.prev||(V.navigation.prev={}),V.navigation.next||(V.navigation.next={}),V.state||(V.state={}),V.pager||(V.pager={});var e=V.slides.length>V.options.displayed;V.state.animating=!0,V.state.dragging=!1,V.navigation.visible=e&&(!V.options.hideNav||V.isHovering&&V.options.navOnHover),V.navigation.prev.visible=!b("prev"),V.navigation.next.visible=!b("next"),V.pager.visible=e&&(!V.options.hidePager||V.isHovering&&V.options.pagerOnHover)}function b(e){if(V.options.loop)return!1;var n;switch(e){case"prev":n=V.currentIndex<V.options.perSlide;break;case"next":n=V.currentIndex>V.slides.length-1-V.options.perSlide}return n}function x(){_.forEach(i,function(n,i){var t;V.defaultOptions.hasOwnProperty(i)&&e.$watch(i,function(e,n){o.cancel(t),t=o(function(){e!==n&&m(i,e)},150)})}),a.addEventListener("resize",function(){_.debounce(w,500)(),V.isPlaying&&F()}),V.kaarouselWrapper.addEventListener("mouseenter",function(){o(function(){V.isHovering=!0,S(),V.options.pauseOnHover&&F()})}),V.kaarouselSlider.addEventListener("mouseleave",function(){V.state.swipable&&V.kaarouselSlider.dispatchEvent(new Event("touchend"))}),V.kaarouselWrapper.addEventListener("mouseleave",function(){o(function(){V.isHovering=!1,S(),V.options.autoplay&&!V.isPlaying&&T()})}),e.$on("$destroy",function(){V.isPlaying&&t.cancel(V.interval),angular.element(V.kaarouselSlider).unbind("mousedown mousemove mouseup touchstart touchmove touchend touchcancel")})}function w(){V.options.minWidth&&m(),V.move(V.currentIndex,!1,!0),V.options.autoplay&&!V.stoppedAfterAction&&T()}function A(e,n){var i={element:e,index:n};e[0].classList.add("kaarousel-slide"),V.slides||(V.slides=[]),V.slides[n]?(V.slides.splice(n,0,i),k(n),o(function(){W(V.currentIndex,null,!0)},150)):V.slides[n]=i}function H(e){V.slides.splice(e,1),o(function(){W(V.currentIndex,null,!0)},150)}function P(){V.currentIndex=0,V.currentPage=0,k(),g(),R(),p(V.options.animation),V.options.autoplay&&!angular.isNumber(V.options.sync)&&T(),V.options.swipable&&K(!0),angular.isNumber(V.options.sync)&&v(V.options.sync)}function I(e){var n,i,t=V.currentIndex;return angular.isNumber(e)?t=e:(n=e?1:-1,i=V.slides.length-1,t+=V.options.perSlide*n,t>i&&(t=0),0>t&&(t=Math.ceil(V.slides.length/V.options.perSlide)*V.options.perSlide-V.options.perSlide)),t}function O(e){W(e*V.options.perSlide,!0)}function $(e){var n=V.options.displayed/2;return parseInt(n)!==n&&V.options.centerActive&&N()>=e.down&&N()<e.up?Math.floor(n):0}function E(){var e=Math.floor(V.options.displayed/2);return{down:V.options.centerActive?e+1:0,up:V.options.centerActive?V.slides.length-e:V.slides.length-V.options.displayed}}function L(){var e,n=N();if(!V.options.alwaysFill){var i=V.options.displayed/2;return V.options.centerActive&&n>i&&(n-=parseInt(i)!==i?Math.floor(i):0),V.slides[n].element[0]}var t=E();return t.up<0&&(t.up=V.slides.length),n<t.down&&(e=n<t.down?0:n),n>=t.down&&(e=n<t.up?n:V.slides.length-V.options.displayed),e-=$(t),V.slides[e].element[0]}function z(e){if("slide"===V.options.animation){var n=L()[V.isHorizontal?"offsetLeft":"offsetTop"],i=V.isHorizontal?"translateX":"translateY",t=-(n+(e||0))+"px";angular.element(V.kaarouselSlider).css({transform:i+"("+t+")",height:"",width:""})}else{var a;"horizontal"===V.options.direction?(a=_.max(_.filter(V.slides,{visible:!0}),function(e){return e.element[0].offsetHeight}).element[0].offsetHeight,angular.element(V.kaarouselSlider).css({height:a+"px",transform:"",width:""})):(a=_.max(_.filter(V.slides,{visible:!0}),function(e){return e.element[0].offsetWidth}).element[0].offsetWidth,angular.element(V.kaarouselSlider).css({width:a+"px",transform:"",height:""}))}}function N(){return angular.isNumber(V.options.sync)?V.options.sync:V.currentIndex}function W(e,n,i){V.options.beforeSlide&&V.options.beforeSlide()(),V.currentIndex=i?N():I(e),V.currentPage=Math.floor(N()/V.options.perSlide),M(),D(),z(),S(),V.currentIndex>V.slides.length-V.options.displayed&&!V.options.loop&&F(),n&&V.isPlaying&&(F(!V.options.stopAfterAction),V.options.stopAfterAction&&(V.stoppedAfterAction=!0)),V.options.afterSlide&&o(function(){V.options.afterSlide()()},V.options.transitionDuration)}function D(){_.forEach(V.slides,function(e,n){var i,t=V.slides.length-V.options.displayed,a=$(E());if("slide"!==V.options.animation)i=n>=V.currentPage*V.options.displayed&&n<(V.currentPage+1)*V.options.displayed;else{var o=N()>t&&n>=t,s=N()-a;i=n>=s&&n<s+V.options.displayed||o}e.visible=i,e.element[0].classList[i?"add":"remove"]("visible")})}function M(){var e=_.filter(V.slides,{active:!0});e.length&&(e[0].active=!1,e[0].element[0].classList.remove("active"));var n=angular.isNumber(V.options.sync)?V.options.sync:V.currentIndex;V.slides[n].element[0].classList.add("active"),V.slides[n].active=!0}function T(){V.isPlaying||(t.cancel(V.interval),V.isPlaying=!0,V.interval=t(function(){W(!0)},V.options.timeInterval))}function F(e){V.isPlaying&&(V.isPlaying=!1,t.cancel(V.interval),e&&o(T,V.options.transitionDuration))}function C(){return V.options.swipable&&V.slides.length>V.options.displayed}function R(){V.state.animating=!0,angular.element(V.kaarouselSlider).css("transition-duration",V.options.transitionDuration/1e3+"s")}function q(){V.state.animating=!1,angular.element(V.kaarouselSlider).css("transition-duration","")}function U(e,n){V.kaarouselSliderContainer.classList.add("dragging");var i,t="horizontal"===V.options.direction?"x":"y";V.state.dragging=!0,i=e[t]-n[t],z(i)}function X(){V.kaarouselSliderContainer.classList.remove("dragging"),V.state.animating=!0,V.state.dragging=!1,R()}function j(e,n){var i="horizontal"===V.options.direction?"x":"y";return e&&n&&Math.abs(e[i]-n[i])>V.options.swipeThreshold}function K(e){if(V.state.swipable=e,!V.swipeReady){var n,i;V.swipeReady=!0,s.bind(angular.element(V.kaarouselSlider),{start:function(e){C()&&(q(),i=e,n=null)},move:function(e){C()&&(n=e,U(i,n))},end:function(){if(X(),C()&&n){var e=i.x-n.x;j(i,n)?e>0?W(!0,!0,!1):W(!1,!0,!1):W(V.currentIndex,!0,!0)}},cancel:function(){C()&&(X(),W(V.currentIndex,!0,!0))}})}}var V=this,Y="kaarousel",B=["autoplay","pauseOnHover","centerActive","stopAfterAction","hideNav","hidePager","navOnHover","pagerOnHover","swipable","loop","expand","alwaysFill"],G=["slide","fade"],J=["displayed","perSlide","autoplay","direction","pauseOnHover","centerActive","timeInterval","transitionDuration","updateRate","stopAfterAction","hideNav","hidePager","navOnHover","pagerOnHover","swipable","sync","animation","loop","options","afterSlide","beforeSlide","minWidth","expand","alwaysFill"];V.init=r,V.register=A,V.removeSlide=H,V.move=W,V.play=T,V.stop=F,V.movePage=O,V.getPages=l,V.defaultOptions={displayed:3,perSlide:1,autoplay:!0,direction:"horizontal",pauseOnHover:!0,centerActive:!1,timeInterval:3e3,transitionDuration:500,stopAfterAction:!1,hideNav:!1,hidePager:!1,navOnHover:!1,pagerOnHover:!1,swipable:!0,sync:null,animation:"slide",loop:!0,afterSlide:null,beforeSlide:null,minWidth:null,expand:!0,swipeThreshold:100,alwaysFill:!0},V.state={}}n.$inject=["$scope","$element","$attrs","$interval","$window","$timeout","$swipe"],angular.module("angular-kaarousel",["ngTouch"]).directive("kaarousel",e)}(),function(){"use strict";function e(){function e(e,n,i,t){t.register(n,e.$index),e.$last&&!t.ready&&t.init(),e.$on("$destroy",function(){t.removeSlide(e.$index)})}var n={restrict:"EA",require:"^kaarousel",link:e};return n}angular.module("angular-kaarousel").directive("kaarouselSlide",e)}(),angular.module("angularKaarousel").run(["$templateCache",function(e){e.put("app/components/kaarousel/templates/angular-kaarousel.html",'<kaarousel-wrapper><kaarousel-slider-container><kaarousel-slider ng-transclude="" class="kaarousel-slider"></kaarousel-slider></kaarousel-slider-container><kaarousel-nav ng-class="{\'is-hidden\': !kc.navigation.visible}"><kaarousel-prev ng-click="kc.move(null, true)" ng-class="{\'is-hidden\': !kc.navigation.prev.visible}">PREV</kaarousel-prev><kaarousel-next ng-click="kc.move(true, true)" ng-class="{\'is-hidden\': !kc.navigation.next.visible}">NEXT</kaarousel-next></kaarousel-nav><kaarousel-pager ng-class="{\'is-hidden\': !kc.pager.visible}"><ul><li ng-repeat="i in kc.getPages() track by $index" ng-click="kc.movePage($index)" ng-class="{selected: $index === kc.currentPage}">{{$index}}</li></ul></kaarousel-pager></kaarousel-wrapper>')}]);